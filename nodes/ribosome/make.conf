# These settings were set by the catalyst build script that automatically
# built this stage.
# Please consult /usr/share/portage/config/make.conf.example for a more
# detailed example.

# this CFLAGS is the same as using -march=native, to prevent possible
# distributed compiling issue later when I decided to do so...
# gcc-7.3.0
CFLAGS="-O2 -pipe -march=sandybridge -mmmx -mno-3dnow -msse -msse2 -msse3 -mssse3 -mno-sse4a -mcx16 -msahf -mno-movbe -maes -mno-sha -mpclmul -mpopcnt -mno-abm -mno-lwp -mno-fma -mno-fma4 -mno-xop -mno-bmi -mno-sgx -mno-bmi2 -mno-tbm -mavx -mno-avx2 -msse4.2 -msse4.1 -mno-lzcnt -mno-rtm -mno-hle -mno-rdrnd -mno-f16c -mno-fsgsbase -mno-rdseed -mno-prfchw -mno-adx -mfxsr -mxsave -mxsaveopt -mno-avx512f -mno-avx512er -mno-avx512cd -mno-avx512pf -mno-prefetchwt1 -mno-clflushopt -mno-xsavec -mno-xsaves -mno-avx512dq -mno-avx512bw -mno-avx512vl -mno-avx512ifma -mno-avx512vbmi -mno-avx5124fmaps -mno-avx5124vnniw -mno-clwb -mno-mwaitx -mno-clzero -mno-pku -mno-rdpid -mtune=sandybridge"
CXXFLAGS="${CFLAGS}"
# WARNING: Changing your CHOST is not something that should be done lightly.
# Please consult http://www.gentoo.org/doc/en/change-chost.xml before changing.
CHOST="x86_64-pc-linux-gnu"

ACCEPT_KEYWORDS="~amd64"

# These are the USE flags that were used in addition to what is provided by the
# profile used for building.

# Processor characteristics
CPU_FLAGS_X86="aes avx mmx mmxext popcnt sse sse2 sse3 sse4_1 sse4_2 ssse3"
#USE="mmx sse sse2 sse3 ssse3 sse4 smp avx"
USE="smp"
# CLI features
USE="${USE} bash-completion ncurses readline zsh-completion"
# GUI features
USE="${USE} cairo dga dri fbcon fontconfig gtk gtk3 lcms libnotify opengl qt4 qt5 truetype wxwidgets"
USE="${USE} qt3support"  # after hardened profile switch
# Desktop environment (Xfce configuration)
USE="${USE} -gnome -kde thunar -networkmanager"
# File formats
USE="${USE} djvu"
USE="${USE} pdf ppds"  # after hardened profile switch
# X11
USE="${USE} X xcb xcomposite xft xinerama xorg xv xvmc gallium g3dvl openvg"
# Wayland
USE="${USE} wayland libinput"
# Hardware features
USE="${USE} acpi alsa cdda cdr cups dvd dvdr gpm lm_sensors udev usb v4l v4l2 wifi"  # don't have bluetooth
# Programming language and devel things
USE="${USE} multilib -static-libs c++0x cxx fortran graphite java libffi nptl openmp pch perl php gd sharedext python threads vim-syntax"
# {,D}VCS of choice
USE="${USE} git mercurial subversion"
# Libraries
USE="${USE} bzip2 dbus fftw gdbm lzma mime mmap pcre sqlite3 zlib"  # postgres
USE="${USE} udisks upower"  # after hardened profile switch
# Kernel and system
USE="${USE} modules symlink syslog xattr"
# Network
# libressl cannot be used right now because of some hard deps
#USE="${USE} ftp ipv6 idn rdesktop rss -gnutls ssl libressl -openssl tcpd vnc ldap -dhcpcd dhclient"
USE="${USE} ftp ipv6 idn rdesktop rss -gnutls ssl openssl tcpd vnc ldap -dhcpcd dhclient"
# Media features
# general
USE="${USE} bluray dts dvb encode ffmpeg gstreamer libass matroska mplayer ogg sdl taglib"
USE="${USE} pango"  # after hardened profile switch
USE="${USE} -libav"
# video
USE="${USE} aalib libcaca mp4 mpeg theora x264 xvid vaapi vdpau libv4l libv4l2"
# audio
# 20130524 xenon: add JACK for some really real-time things; also for USB audio switching
# 20151125 xenon: enable pulseaudio, can't tolerate lack of headphone jack detection any more
USE="${USE} a52 aac flac jack ladspa lame libsamplerate mad mp3 vorbis wavpack pulseaudio"
# image formats
USE="${USE} exif gif jpeg jpeg2k mng png raw svg tiff xpm"
# L10N things
USE="${USE} cjk unicode iconv icu nls spell"
# Security
USE="${USE} caps cracklib crypt gnome-keyring sasl"  # hardened
USE="${USE} policykit"  # after hardened profile switch
# Miscellaneous flags
USE="${USE} branding firefox lock -minimal nsplugin session startup-notification webkit xml"
USE="${USE} steamruntime"
# Init system
USE="${USE} -consolekit systemd"
# After hardened profile switch, keep the flags in place
# branding -- seems only mozilla things use that flag
# emboss and fam -- why did that enter my flag list?

GENTOO_MIRRORS="https://mirrors.163.com/gentoo/"

MAKEOPTS="-j8 -l16"

LINGUAS="zh_CN zh en_US en"
L10N="en en-US zh zh-CN zh-TW ja"

EMERGE_DEFAULT_OPTS="--ask-enter-invalid"

FEATURES="nostrip parallel-install parallel-fetch userfetch userpriv usersandbox"
#FEATURES="${FEATURES} distcc"

# XZ compress docs
PORTAGE_COMPRESS="xz"
PORTAGE_COMPRESS_FLAGS="-6"

# ABI
ABI_X86="64 32"

# LLVM
LLVM_TARGETS="AArch64 AMDGPU ARM BPF Hexagon Lanai MSP430 Mips NVPTX PowerPC RISCV Sparc SystemZ X86 XCore"

# Python targets
PYTHON_TARGETS="python2_7 python3_5 python3_6"  # pypy
PYTHON_SINGLE_TARGET="python3_5"
USE_PYTHON="2.7 3.5 3.6"

# Ruby
RUBY_TARGETS="ruby24 ruby25"

# X11 things
INPUT_DEVICES="evdev synaptics libinput"
VIDEO_CARDS="radeon intel i965 r600"

# Sound cards
ALSA_CARDS="hda-intel usb-audio"

# QEMU targets
QEMU_SOFTMMU_TARGETS="alpha arm aarch64 cris i386 lm32 m68k microblaze microblazeel mips mips64 mips64el mipsel or32 ppc ppc64 ppcemb s390x sh4 sh4eb sparc sparc64 unicore32 x86_64"
QEMU_USER_TARGETS="arm aarch64 mips64el"

# steam-overlay suggests this
USE_EXPAND="${USE_EXPAND} STEAMGAMES"

# overlay
# now in repos.conf/

PORTDIR_OVERLAY="${PORTDIR_OVERLAY}
/usr/local/crossdev-portage"
